/*! @preserve
 * bstreeview.js
 * Version: 1.2.2
 * Authors: Sami CHNITER <sami.chniter@gmail.com>, Alberto Levy Espinosa <alberto.levy.espinosa@gmail.com>
 * Copyright 2023
 * License: Apache License 2.0
 *
 * Project: https://github.com/chniter/bstreeview
 * Project: https://github.com/nhmvienna/bs5treeview (bootstrap 5)
 * Project: https://github.com/albertolevyespinosa/bs5treeview-extended (bootstrap 5 with version field)
 */
!function(t,e,i,s){"use strict";var n="bstreeview",a={expandIcon:"fa fa-angle-down fa-fw",collapseIcon:"fa fa-angle-right fa-fw",expandClass:"show",indent:1.25,parentsMarginLeft:"1.25rem",openNodeLinkOnNewTab:!0},d='<div class="bstreeview list-group"></div>',r='<div role="treeitem" class="list-group-item" data-bs-toggle="collapse"></div>',o='<div role="group" class="list-group collapse" id="itemid"></div>',l='<i class="state-icon"></i>',p='<i class="item-icon"></i>',g='<div class="item-data"></div>';function c(e,i){this.element=e,this.itemIdPrefix=e.id+"-item-",this.settings=t.extend({},a,i),this.init()}t.extend(c.prototype,{init:function(){this.tree=[],this.nodes=[],this.settings.data&&(this.settings.data.isPrototypeOf(String)&&(this.settings.data=t.parseJSON(this.settings.data)),this.tree=t.extend(!0,[],this.settings.data),delete this.settings.data),t(this.element).addClass("bstreeview").addClass("list-group"),this.initData({nodes:this.tree});var i=this;this.build(t(this.element),this.tree,0),t(this.element).on("click",".list-group-item",(function(s){t(".state-icon",this).toggleClass(i.settings.expandIcon).toggleClass(i.settings.collapseIcon),s.target.hasAttribute("href")?i.settings.openNodeLinkOnNewTab?e.open(s.target.getAttribute("href"),"_blank"):e.location=s.target.getAttribute("href"):t(t(this).attr("data-bs-target")).collapse("toggle")}))},initData:function(e){if(e.nodes){var i=e,s=this;t.each(e.nodes,(function t(e,n){n.nodeId=s.nodes.length,n.parentId=i.nodeId,s.nodes.push(n),n.nodes&&s.initData(n)}))}},build:function(e,i,s){var n=this,a=n.settings.parentsMarginLeft;s>0&&(a=(n.settings.indent+s*n.settings.indent).toString()+"rem;"),s+=1,t.each(i,(function i(d,c){var h=t(r).attr("data-bs-target","#"+n.itemIdPrefix+c.nodeId).attr("style","padding-left:"+a+"; display: flex;").attr("aria-level",s);if(c.nodes&&c.nodes.length>0){var f=t(l).addClass(c.expanded?n.settings.expandIcon:n.settings.collapseIcon);h.append(f)}if(c.icon){var u=t(p).addClass(c.icon);h.append(u)}var v=t(g).attr("style","flex-grow: 2");if(v.append(c.text),h.append(v),c.version){var b=t(g).attr("style","display: flex; justify-content: flex-end;");b.append(c.version),h.append(b)}if(c.href&&h.attr("href",c.href),c.class&&h.addClass(c.class),c.id&&h.attr("id",c.id),e.append(h),c.nodes){var x=t(o).attr("id",n.itemIdPrefix+c.nodeId);e.append(x),n.build(x,c.nodes,s),c.expanded&&x.addClass(n.settings.expandClass)}}))}}),t.fn.bstreeview=function(e){return this.each((function(){t.data(this,"plugin_bstreeview")||t.data(this,"plugin_bstreeview",new c(this,e))}))}}(jQuery,window,document);