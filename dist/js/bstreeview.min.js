/*! @preserve
 * bstreeview.js
 * Version: 1.3.0
 * Authors: Sami CHNITER <sami.chniter@gmail.com>, Alberto Levy Espinosa <alberto.levy.espinosa@gmail.com>
 * Copyright 2023
 * License: Apache License 2.0
 *
 * Project: https://github.com/chniter/bstreeview
 * Project: https://github.com/nhmvienna/bs5treeview (bootstrap 5)
 * Project: https://github.com/albertolevyespinosa/bs5treeview-extended (bootstrap 5 with extra fields)
 */
!function(t,e,i,s){"use strict";var a="bstreeview",n={expandIcon:"fa fa-angle-down fa-fw",collapseIcon:"fa fa-angle-right fa-fw",expandClass:"show",indent:1.25,parentsMarginLeft:"1.25rem",openNodeLinkOnNewTab:!0},d='<div class="bstreeview list-group"></div>',r='<div role="treeitem" class="list-group-item" data-bs-toggle="collapse"></div>',o='<div role="group" class="list-group collapse" id="itemid"></div>',l='<i class="state-icon"></i>',p='<i class="item-icon"></i>',g='<div class="item-data"></div>',c='<div class="item-extra-data"></div>';function h(e,i){this.element=e,this.itemIdPrefix=e.id+"-item-",this.settings=t.extend({},n,i),this.init()}t.extend(h.prototype,{init:function(){this.tree=[],this.nodes=[],this.settings.data&&(this.settings.data.isPrototypeOf(String)&&(this.settings.data=t.parseJSON(this.settings.data)),this.tree=t.extend(!0,[],this.settings.data),delete this.settings.data),t(this.element).addClass("bstreeview").addClass("list-group"),this.initData({nodes:this.tree});var i=this;this.build(t(this.element),this.tree,0),t(this.element).on("click",".list-group-item",(function(s){t(".state-icon",this).toggleClass(i.settings.expandIcon).toggleClass(i.settings.collapseIcon),s.target.hasAttribute("href")?i.settings.openNodeLinkOnNewTab?e.open(s.target.getAttribute("href"),"_blank"):e.location=s.target.getAttribute("href"):t(t(this).attr("data-bs-target")).collapse("toggle")}))},initData:function(e){if(e.nodes){var i=e,s=this;t.each(e.nodes,(function t(e,a){a.nodeId=s.nodes.length,a.parentId=i.nodeId,s.nodes.push(a),a.nodes&&s.initData(a)}))}},build:function(e,i,s){var a=this,n=a.settings.parentsMarginLeft;s>0&&(n=(a.settings.indent+s*a.settings.indent).toString()+"rem;"),s+=1,t.each(i,(function i(d,h){var f=t(r).attr("data-bs-target","#"+a.itemIdPrefix+h.nodeId).attr("style","padding-left:"+n+"; display: flex;").attr("aria-level",s);if(h.nodes&&h.nodes.length>0){var u=t(l).addClass(h.expanded?a.settings.expandIcon:a.settings.collapseIcon);f.append(u)}if(h.icon){var v=t(p).addClass(h.icon);f.append(v)}var x=t(g);if(x.append(h.text),f.append(x),h.extra&&t.each(h.extra,(function(e,i){var s=t(c);s.append(i.text),f.append(s)})),h.href&&f.attr("href",h.href),h.class&&f.addClass(h.class),h.id&&f.attr("id",h.id),e.append(f),h.nodes){var b=t(o).attr("id",a.itemIdPrefix+h.nodeId);e.append(b),a.build(b,h.nodes,s),h.expanded&&b.addClass(a.settings.expandClass)}}))}}),t.fn.bstreeview=function(e){return this.each((function(){t.data(this,"plugin_bstreeview")||t.data(this,"plugin_bstreeview",new h(this,e))}))}}(jQuery,window,document);